import Preview from "../../components/Preview";
import { PropsTable } from "../../components/table/option-table";
import { DataGridValueFormattingExample } from "../../components/examples/datagrid-value-formatting-example";
import { Callout } from "nextra-theme-docs";

## Value formatter

- `withValueFormatter` is a helper that can be used when defining your columns in order to facilitate value formatting.
- This can be used for internationalization.
- `withValueFormatter<T, R>((value: T) => R)`

<Callout>
    The formatting only applies when you use the `getValue` function.
</Callout>

<PropsTable title={"withValueFormatter"} options={[
    ["(callback)", `(value: T) => R`],
]}/>

### Example

- `visible` is originally of type `boolean`.

```tsx showLineNumbers /getValue/ /withValueFormatter/
const columns = useMemo(() => createDataGridColumns<Product>(({ withFiltering, getFilterFn, withValueFormatter }) => [
    ...,
    {
        accessorKey: "availability",
        header: "Availability",
        cell: info => info.getValue(), // Formatted value
        size: 0,
        filterFn: getFilterFn("checkbox"),
        meta: {
            ...withValueFormatter<string>(value => {
                if (value === "out_of_stock") return "Out of stock"
                if (value === "in_stock") return "In stock"
                return value
            }),
            ...withFiltering({
                name: "Availability",
                type: "checkbox",
                icon: <BiCheck/>,
                options: [
                    {
                        value: "out_of_stock",
                        label: <span className={"flex items-center gap-2"}><BiBasket className={"text-red-500"}/><span>Out of stock</span></span>,
                    },
                    {
                        value: "in_stock",
                        label: <span className={"flex items-center gap-2"}><BiBasket className={"text-green-500"}/><span>In stock</span></span>,
                    },
                ],
            }),
        },
    },
    {
        accessorKey: "visible",
        header: "Visible",
        cell: info => <Badge intent={info.getValue() === "Visible" ? "success" : "gray"}>{info.getValue<string>()}</Badge>, // Formatted value
        meta: {
            ...withValueFormatter<boolean, string>(value => {
                return value ? "Visible" : "Hidden"
            }),
        },
    },
]), [])
```

### Integration with other helpers

<Callout>
    `withValueFormatter` will automatically provide formatting to other helpers like `withFiltering`.
</Callout>

- The values in the filter list will be formatted.

<Preview contentClassName={"max-w-full"}>
    <DataGridValueFormattingExample/>
</Preview>
